# Q10：你知道vue3有哪些新特性吗？它们会带来什么影响？

vue3的新特性：

## 1. 更快

Vue3.0已经放弃了Object.defineProperty ,因为这个实现存在很多限制（无法监听属性的添加和删除、数组索引和长度的变更），而选择了使用更快的原生Proxy。这两种都是基于数据劫持实现的双向绑定。

> **数据劫持**：当访问或者设置对象属性的时候，触发相应的函数，并且返回或者设置的值。劫持对象属性的getter和setter操作，当数据发生变化时发出通知。

> **数据劫持的优势**：
>1.不需要进行显示调用，vue的双向绑定原理即使通过数据劫持+发布订阅	来实现的，例如react的setState
>2.通过属性的劫持可以精准获得变化的内容，不需要额外的diff操作，减少性能消耗

### Object.defineProperty的缺陷

1. 性能：通过遍历对象的属性进行监听，但是属性值也是对象就需要深度遍历。
2. 无法监听数组：数组的主要操作场景是遍历，如果每一个元素都挂载set和get方法，会产生巨大性能消耗
3. 对属性的添加、删除动作的检测；
4. 对数组基于下标的修改、对于 .length修改的检测

### Proxy的优势

Proxy是ES6原生提供的。在对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。Proxy可以直接监听对象而非属性，并返回一个新对象。Proxy可以直接监听数组的变化。

## 2. 更小

支持tree-shaking，运行时的最小体积将低于10kb

## 3. 更易维护

## 4. 更多原生支持

运行时内核将与平台无关，使得vue可以更容易的与任何平台（ios、android、web）一起使用。

## 5. 更易于开发使用

Observer模块已被解压缩到自己的包中，允许使用。3.0 =Function-based API 代替传统的Class API。

6. 重写虚拟DOM

## 7. 优化插槽生成

在当前的vue版本中，当父组件重新渲染时，其子组件也必须重新渲染（除非修改的数据是子组件的props，才会触发组件的重新渲染）。使用vue3，可以单独重新渲染父组件和子组件。

## 8. 静态树提升

使用静态树提升，这意味着vue3的编译器能够检测到什么是静态组件，然后将其提升，从而降低了渲染成本。

9. 基于Proxy的观察者机制

见1


